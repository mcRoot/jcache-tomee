<?xml version="1.0" encoding="UTF-8"?>
<!--
 Copyright (c) Codeferm. All rights reserved.

 Dev configuration file for Ehcache. This does not include RMI replication.

 Created by Steven P. Goldsmith on August 19, 2015
 sgoldsmith@codeferm.com
-->
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="ehcache.xsd"
         updateCheck="true" monitoring="autodetect"
         dynamicConfig="true">

    <defaultCache
        maxEntriesLocalHeap="1000000"
        eternal="false"
        timeToIdleSeconds="600"
        timeToLiveSeconds="600"
        memoryStoreEvictionPolicy="LRU">
    </defaultCache>

    <cacheManagerPeerProviderFactory
        class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
        properties="peerDiscovery=manual, rmiUrls=//${ehcache.providerHost}:${ehcache.providerPort}/test"
        propertySeparator="," />

    <cacheManagerPeerListenerFactory
        class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
        properties="hostName=${ehcache.listenerHost}, port=${ehcache.listenerPort}, socketTimeoutMillis=120000"
        propertySeparator=","/>    

    <cache name="shortCache"
           maxBytesLocalHeap="${ehcache.short.maxBytesLocalHeap}"
           eternal="false"
           timeToIdleSeconds="${ehcache.short.timeToIdleSeconds}"
           timeToLiveSeconds="${ehcache.short.timeToLiveSeconds}"
           memoryStoreEvictionPolicy="LFU"
           transactionalMode="off">

        <!-- RMI replication listener -->
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
            properties="replicateAsynchronously=true,
                 replicatePuts=true,
                 replicatePutsViaCopy=true,
                 replicateUpdates=true,
                 replicateUpdatesViaCopy=true,
                 replicateRemovals=true" />

        <!-- RMI Cache bootstrap -->
        <bootstrapCacheLoaderFactory
            class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"
            properties="bootstrapAsynchronously=true, maximumChunkSizeBytes=5000000"
            propertySeparator="," />                
    </cache>
    
    <cache name="medCache"
           maxBytesLocalHeap="${ehcache.med.maxBytesLocalHeap}"
           eternal="false"
           timeToIdleSeconds="${ehcache.med.timeToIdleSeconds}"
           timeToLiveSeconds="${ehcache.med.timeToLiveSeconds}"
           memoryStoreEvictionPolicy="LFU"
           transactionalMode="off">

        <!-- RMI replication listener -->
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
            properties="replicateAsynchronously=true,
                 replicatePuts=true,
                 replicatePutsViaCopy=true,
                 replicateUpdates=true,
                 replicateUpdatesViaCopy=true,
                 replicateRemovals=true" />

        <!-- RMI Cache bootstrap -->
        <bootstrapCacheLoaderFactory
            class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"
            properties="bootstrapAsynchronously=true, maximumChunkSizeBytes=5000000"
            propertySeparator="," />                
    </cache>

    <cache name="longCache"
           maxBytesLocalHeap="${ehcache.long.maxBytesLocalHeap}"
           eternal="false"
           timeToIdleSeconds="${ehcache.long.timeToIdleSeconds}"
           timeToLiveSeconds="${ehcache.long.timeToLiveSeconds}"
           memoryStoreEvictionPolicy="LFU"
           transactionalMode="off">

        <!-- RMI replication listener -->
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
            properties="replicateAsynchronously=true,
                 replicatePuts=true,
                 replicatePutsViaCopy=true,
                 replicateUpdates=true,
                 replicateUpdatesViaCopy=true,
                 replicateRemovals=true" />

        <!-- RMI Cache bootstrap -->
        <bootstrapCacheLoaderFactory
            class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"
            properties="bootstrapAsynchronously=true, maximumChunkSizeBytes=5000000"
            propertySeparator="," />                
    </cache>

</ehcache>
